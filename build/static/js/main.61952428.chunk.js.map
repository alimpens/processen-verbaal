{"version":3,"sources":["useDownload.ts","App.js","reportWebVitals.js","index.js"],"names":["useDownload","useState","loading","setLoading","error","setError","url","a","options","fileName","fetch","then","response","blob","fileSaver","split","pop","catch","StyledForm","styled","form","themeSpacing","StyledSelect","Select","SpinnerWrapper","div","App","data","setData","config","setConfig","value","setValue","downloadLoading","downloadFile","resetError","setResetError","disableButton","setDisableButton","useEffect","isMounted","json","rootDiv","document","querySelector","dataset","configUrl","JSON","parse","contentApi","ThemeProvider","GlobalStyle","Paragraph","Link","href","applicatie","variabelen","variant","target","defaultValue","onChange","e","label","disabled","hidden","_embedded","processenverbaal","sort","b","volgnummer","map","num","places","id","uri","String","padStart","Button","type","iconLeft","Spinner","Download","onClick","ErrorMessage","message","size","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","window","renderApp","container","getElementById","ReactDOM","render","StrictMode","addEventListener","top","self","body","className","root","scrollHeight","parent","postMessage","registerHeightObserver","direction"],"mappings":"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","file":"static/js/main.61952428.chunk.js","sourcesContent":["import { useState } from 'react'\nimport fileSaver from 'file-saver'\n\nfunction useDownload() {\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(false)\n\n  async function downloadFile(url: string, options = {}, fileName = '') {\n    setLoading(true)\n\n    fetch(url, options)\n      .then((response) => response.blob())\n      .then((blob) => {\n        // @ts-ignore\n        fileSaver(blob, fileName || url.split('/').pop())\n        setLoading(false)\n      })\n      .catch(() => {\n        setError(true)\n        setLoading(false)\n      })\n  }\n\n  return [\n    loading,\n    downloadFile,\n    error\n  ]\n}\n\nexport default useDownload","import { useState, useEffect } from 'react'\nimport {\n  GlobalStyle,\n  ThemeProvider,\n  Paragraph,\n  Link,\n  Select,\n  Button,\n  themeSpacing,\n  Spinner,\n  ErrorMessage\n} from '@amsterdam/asc-ui'\nimport { Download } from '@amsterdam/asc-assets'\nimport styled from 'styled-components'\nimport useDownload from './useDownload'\n\nconst URL = 'https://api.data.amsterdam.nl/v1/verkiezingen/processenverbaal/?page_size=10000&verkiezingsjaar=2022'\n\nconst zeroPad = (num, places) => String(num).padStart(places, '0')\n\nconst StyledForm = styled.form`\n  width: 100%;\n  margin-top: ${themeSpacing(8)};\n`\n\nconst StyledSelect = styled(Select)`\n  max-width: 320px;\n  margin-bottom: ${themeSpacing(9)};\n`\n\nconst SpinnerWrapper = styled.div`\n  max-width: 320px;\n`\n\nfunction App() {\n  const [data, setData] = useState()\n  const [config, setConfig] = useState()\n  const [value, setValue] = useState()\n  const [downloadLoading, downloadFile, error] = useDownload()\n  const [resetError, setResetError] = useState(false)\n  const [disableButton, setDisableButton] = useState(true)\n\n  useEffect(() => {\n    let isMounted = true;\n\n    fetch(URL)\n      .then(response => response.json())\n      .then(json => {\n        if (isMounted) {\n          setData(json)\n        }\n      });\n\n    return () => { isMounted = false; }\n  }, [])\n\n  useEffect(() => {\n    let isMounted = true\n\n    const rootDiv = document.querySelector('#root')\n    const config = rootDiv?.dataset?.config\n    const configUrl = config && JSON.parse(config)?.contentApi\n\n    fetch(configUrl)\n      .then(response => response.json())\n      .then(json => {\n        if (isMounted) {\n          setConfig(json)\n        }\n      });\n\n    return () => { isMounted = false; }\n  }, [])\n\n  const handleChange = e => {\n    setValue(e.target.value)\n    setResetError(true)\n    setDisableButton(false)\n  }\n\n  const handleClick = () => {\n    downloadFile(value)\n    setResetError(false)\n  }\n\n  return (\n    <ThemeProvider>\n      <GlobalStyle />\n      {/* <Heading gutterBottom={28}>Proces verbalen stembureaus gemeenteraadsverkiezingen Amsterdam 2022</Heading> */}\n      <Paragraph>Hier kunt u de processen-verbaal van de Amsterdamse stembureaus downloaden.</Paragraph>\n      <Paragraph>\n        {config &&\n        <Link\n          href={`${config?.applicatie['extra-velden']?.variabelen?.value}2022-03-16-alle-stembureaus-voor-uitslag.pdf`}\n          variant='inline'\n          target='_blank'>\n            Bekijk hier de lijst met alle stembureaus\n        </Link>}\n      </Paragraph>\n      {data ?\n      <StyledForm>\n        <StyledSelect\n          defaultValue={'placeholder'}\n          value={value}\n          onChange={handleChange}\n          label={'Kies stembureau'}\n        >\n          <option value='placeholder' disabled hidden>Maak een keuze</option>\n          {data._embedded?.processenverbaal?.sort((a,b) => a.volgnummer-b.volgnummer).map(({ id, volgnummer, uri }) =>\n            <option\n              key={id}\n              value={uri}\n            >\n              {`Stembureau ${zeroPad(volgnummer, 3)}`}\n            </option>\n          )}\n        </StyledSelect>\n        <Button\n          type='button'\n          iconLeft={downloadLoading ? <Spinner /> : <Download />}\n          onClick={handleClick}\n          variant='primary'\n          disabled={disableButton || downloadLoading}\n        >\n          Download\n        </Button>\n        {error && !resetError && <ErrorMessage message=\"Deze download is niet beschikbaar\" />}\n      </StyledForm> :\n      <SpinnerWrapper>\n        <Spinner size={24} />\n      </SpinnerWrapper>}\n    </ThemeProvider>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { registerHeightObserver } from 'element-height-observer'\n\n// render micro frontend function\nwindow.renderApp = () => {\n  const container = document.getElementById('micro-frontend')\n  if (container) {\n    ReactDOM.render(\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>,\n      container\n    );\n  }\n};\n\n// Mount to root if it is not a micro frontend\nif (!document.getElementById('micro-frontend')) {\n  ReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\n// setup app to work well in iframe\nwindow.addEventListener('load', function () {\n  // add class to body if document is in iframe to remove scrollbar in css\n  if (window.top!==window.self) { document.body.className += \" framed\"}\n\n  const root = document.getElementById('root')\n\n  // send height to iframe onload\n  let message = 'documentHeight:'+root.scrollHeight\n  window.parent.postMessage(message,'*');\n\n  // send height to iframe when height of root changes\n  registerHeightObserver(root, { direction: 'vertical' }, function () {\n    let message = 'documentHeight:'+root.scrollHeight\n    window.parent.postMessage(message,'*');\n  })\n});\n"],"sourceRoot":""}